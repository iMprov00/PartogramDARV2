<div class="card">
  <div class="card-header bg-main text-white">
    <h5 class="card-title mb-0">
      <i class="bi bi-plus-circle me-2"></i>Новая пациентка
    </h5>
  </div>
  <div class="card-body">
    <form action="/patients" method="post" id="patient-form">
      <div class="row">
        <div class="col-md-6 mb-3">
          <label for="full_name" class="form-label">ФИО <span class="text-danger">*</span></label>
          <input type="text" 
                 class="form-control touch-friendly" 
                 id="full_name" 
                 name="patient[full_name]" 
                 required
                 placeholder="Иванова Мария Петровна">
        </div>
        
        <div class="col-md-3 mb-3">
          <label for="age" class="form-label">Возраст</label>
          <input type="number" 
                 class="form-control touch-friendly" 
                 id="age" 
                 name="patient[age]" 
                 min="14"
                 max="60"
                 placeholder="30">
        </div>
        
        <div class="col-md-3 mb-3">
          <label for="gestational_age" class="form-label">Срок беременности (нед.)</label>
          <input type="number" 
                 class="form-control touch-friendly" 
                 id="gestational_age" 
                 name="patient[gestational_age]" 
                 min="20"
                 max="45"
                 placeholder="40">
        </div>
        
        <div class="col-md-4 mb-3">
          <label for="admission_date" class="form-label">Дата поступления <span class="text-danger">*</span></label>
          <input type="date" 
                 class="form-control touch-friendly" 
                 id="admission_date" 
                 name="patient[admission_date]" 
                 required
                 value="<%= Date.today %>">
        </div>
        
        <div class="col-md-4 mb-3">
          <label for="history_number" class="form-label">№ истории болезни</label>
          <input type="text" 
                 class="form-control touch-friendly" 
                 id="history_number" 
                 name="patient[history_number]" 
                 placeholder="Номер истории">
        </div>
        
        <div class="col-md-4 mb-3">
          <label for="parity" class="form-label">Партитет</label>
          <input type="number" 
                 class="form-control touch-friendly" 
                 id="parity" 
                 name="patient[parity]" 
                 min="0"
                 placeholder="1">
        </div>
        
        <div class="col-md-4 mb-3">
          <label for="labor_start" class="form-label">Начало родов</label>
          <input type="datetime-local" 
                 class="form-control touch-friendly" 
                 id="labor_start" 
                 name="patient[labor_start]">
        </div>
        
        <div class="col-md-4 mb-3">
          <label for="active_phase_start" class="form-label">Начало активной фазы</label>
          <input type="datetime-local" 
                 class="form-control touch-friendly" 
                 id="active_phase_start" 
                 name="patient[active_phase_start]">
        </div>
        
        <div class="col-md-4 mb-3">
          <label for="membrane_rupture" class="form-label">Разрыв плодных оболочек</label>
          <input type="datetime-local" 
                 class="form-control touch-friendly" 
                 id="membrane_rupture" 
                 name="patient[membrane_rupture]">
        </div>
        
        <div class="col-md-6 mb-3">
          <label for="status" class="form-label">Статус <span class="text-danger">*</span></label>
          <select class="form-select touch-friendly" id="status" name="patient[status]" required>
            <% if defined?(Patient) && Patient.const_defined?(:STATUSES) %>
              <% Patient::STATUSES.each do |key, value| %>
                <option value="<%= value %>"><%= value %></option>
              <% end %>
            <% else %>
              <option value="роды не начались">роды не начались</option>
              <option value="в родах">в родах</option>
              <option value="роды завершены">роды завершены</option>
            <% end %>
          </select>
        </div>
        
        <div class="col-12 mb-3">
          <label for="risk_factors" class="form-label">Значимые факторы риска</label>
          <textarea class="form-control touch-friendly" 
                    id="risk_factors" 
                    name="patient[risk_factors]" 
                    rows="3"
                    placeholder="Например: гестационный диабет, преэклампсия, многоплодная беременность..."></textarea>
        </div>
        
        <div class="col-12 mb-3">
          <label for="notes" class="form-label">Примечания</label>
          <textarea class="form-control touch-friendly" 
                    id="notes" 
                    name="patient[notes]" 
                    rows="3"
                    placeholder="Дополнительная информация..."></textarea>
        </div>
      </div>
      
      <div class="d-flex justify-content-between mt-4">
        <a href="/patients" class="btn btn-secondary touch-friendly">
          <i class="bi bi-arrow-left me-1"></i> Назад
        </a>
        <button type="submit" class="btn btn-main touch-friendly">
          <i class="bi bi-check-circle me-1"></i> Сохранить
        </button>
      </div>
    </form>
  </div>
</div>