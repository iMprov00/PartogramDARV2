<div class="card">
  <div class="card-header bg-main text-white">
    <h5 class="card-title mb-0">
      <i class="bi bi-pencil me-2"></i>Редактирование пациентки
    </h5>
  </div>
  <div class="card-body">
    <form action="/patients/<%= @patient.id %>" method="post" id="patient-form">
      <input type="hidden" name="_method" value="put">
      
      <div class="row">
        <div class="col-md-6 mb-3">
          <label for="full_name" class="form-label">ФИО <span class="text-danger">*</span></label>
          <input type="text" 
                 class="form-control touch-friendly" 
                 id="full_name" 
                 name="patient[full_name]" 
                 value="<%= @patient.full_name %>"
                 required>
        </div>
        
        <div class="col-md-3 mb-3">
          <label for="age" class="form-label">Возраст</label>
          <input type="number" 
                 class="form-control touch-friendly" 
                 id="age" 
                 name="patient[age]" 
                 value="<%= @patient.age %>"
                 min="14"
                 max="60">
        </div>
        
        <div class="col-md-3 mb-3">
          <label for="gestational_age" class="form-label">Срок беременности (нед.)</label>
          <input type="number" 
                 class="form-control touch-friendly" 
                 id="gestational_age" 
                 name="patient[gestational_age]" 
                 value="<%= @patient.gestational_age %>"
                 min="20"
                 max="45">
        </div>
        
        <div class="col-md-4 mb-3">
          <label for="admission_date" class="form-label">Дата поступления <span class="text-danger">*</span></label>
          <input type="date" 
                 class="form-control touch-friendly" 
                 id="admission_date" 
                 name="patient[admission_date]" 
                 value="<%= @patient.admission_date %>"
                 required>
        </div>
        
        <div class="col-md-4 mb-3">
          <label for="history_number" class="form-label">№ истории болезни</label>
          <input type="text" 
                 class="form-control touch-friendly" 
                 id="history_number" 
                 name="patient[history_number]" 
                 value="<%= @patient.history_number %>">
        </div>
        
        <div class="col-md-4 mb-3">
          <label for="parity" class="form-label">Партитет</label>
          <input type="number" 
                 class="form-control touch-friendly" 
                 id="parity" 
                 name="patient[parity]" 
                 value="<%= @patient.parity %>"
                 min="0">
        </div>
        
        <div class="col-md-4 mb-3">
          <label for="labor_start" class="form-label">Начало родов</label>
          <input type="datetime-local" 
                 class="form-control touch-friendly" 
                 id="labor_start" 
                 name="patient[labor_start]"
                 value="<%= @patient.labor_start&.strftime('%Y-%m-%dT%H:%M') %>">
        </div>
        
        <div class="col-md-4 mb-3">
          <label for="active_phase_start" class="form-label">Начало активной фазы</label>
          <input type="datetime-local" 
                 class="form-control touch-friendly" 
                 id="active_phase_start" 
                 name="patient[active_phase_start]"
                 value="<%= @patient.active_phase_start&.strftime('%Y-%m-%dT%H:%M') %>">
        </div>
        
        <div class="col-md-4 mb-3">
          <label for="membrane_rupture" class="form-label">Разрыв плодных оболочек</label>
          <input type="datetime-local" 
                 class="form-control touch-friendly" 
                 id="membrane_rupture" 
                 name="patient[membrane_rupture]"
                 value="<%= @patient.membrane_rupture&.strftime('%Y-%m-%dT%H:%M') %>">
        </div>
        
        <div class="col-md-6 mb-3">
          <label for="status" class="form-label">Статус <span class="text-danger">*</span></label>
          <select class="form-select touch-friendly" id="status" name="patient[status]" required>
            <% Patient::STATUSES.each_value do |status| %>
              <option value="<%= status %>" <%= 'selected' if @patient.status == status %>>
                <%= status %>
              </option>
            <% end %>
          </select>
        </div>
        
        <div class="col-12 mb-3">
          <label for="risk_factors" class="form-label">Значимые факторы риска</label>
          <textarea class="form-control touch-friendly" 
                    id="risk_factors" 
                    name="patient[risk_factors]" 
                    rows="3"><%= @patient.risk_factors %></textarea>
        </div>
        
        <div class="col-12 mb-3">
          <label for="notes" class="form-label">Примечания</label>
          <textarea class="form-control touch-friendly" 
                    id="notes" 
                    name="patient[notes]" 
                    rows="3"><%= @patient.notes %></textarea>
        </div>
      </div>
      
      <div class="d-flex justify-content-between mt-4">
        <a href="/patients" class="btn btn-secondary touch-friendly">
          <i class="bi bi-arrow-left me-1"></i> Назад
        </a>
        <div>
          <button type="submit" class="btn btn-main touch-friendly">
            <i class="bi bi-check-circle me-1"></i> Сохранить
          </button>
        </div>
      </div>
    </form>
  </div>
</div>